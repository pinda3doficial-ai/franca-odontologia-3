<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quarta-feira: Mito ou Verdade | Fran√ßa Odontologia</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;800&display=swap');
        body { font-family: 'Poppins', sans-serif; background: #2563eb; }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-4">

    <div id="auth-container" class="hidden bg-white w-full max-w-md rounded-3xl shadow-2xl p-8 text-center">
        <h1 class="text-2xl font-800 text-blue-900 mb-6">IDENTIFIQUE-SE ü¶∑</h1>
        <p class="text-gray-600 mb-8">Para entrar no Ranking da Fran√ßa Odontologia, fa√ßa login com o Google.</p>
        <button onclick="fazerLogin()" class="bg-white border-2 border-gray-200 text-gray-700 w-full py-4 rounded-2xl font-bold flex items-center justify-center gap-3 hover:bg-gray-50 transition-all">
            <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/action/google.svg" width="20">
            Entrar com Google
        </button>
    </div>

    <div id="game-wrapper" class="hidden bg-white w-full max-w-md rounded-3xl shadow-2xl overflow-hidden">
        <div class="bg-blue-50 p-6 text-center border-b border-blue-100">
            <h1 class="text-blue-900 font-bold text-xl uppercase">Desafio Fran√ßa</h1>
            <p class="text-blue-500 text-sm">Quarta-feira: Mito ou Verdade</p>
        </div>

        <div id="game-container" class="p-6">
            <div class="flex justify-between items-center mb-6">
                <span class="text-xs font-bold text-blue-400 uppercase">Quest√£o <span id="num-atual">1</span>/5</span>
                <span class="bg-yellow-400 text-yellow-900 text-[10px] font-bold px-3 py-1 rounded-full uppercase">Pontos: <span id="pontos-view">0</span></span>
            </div>
            <h2 id="pergunta" class="text-gray-800 text-lg font-bold leading-tight mb-8 min-h-[80px]">Carregando...</h2>
            <div id="botoes-acao" class="grid grid-cols-2 gap-4">
                <button onclick="responder(false)" class="bg-red-100 text-red-700 font-bold py-5 rounded-2xl border-b-4 border-red-300">MITO</button>
                <button onclick="responder(true)" class="bg-green-100 text-green-700 font-bold py-5 rounded-2xl border-b-4 border-green-300">VERDADE</button>
            </div>
            <div id="feedback" class="hidden mt-6"></div>
        </div>

        <div id="tela-final" class="hidden p-8 text-center">
            <h2 class="text-2xl font-bold text-blue-900 mb-2">Excelente! üéâ</h2>
            <div class="bg-blue-50 rounded-2xl p-6 mb-6">
                <p id="nome-paciente" class="text-blue-800 font-bold mb-2"></p>
                <p class="text-[10px] text-blue-500 uppercase font-bold">Pontos de Hoje</p>
                <p id="pontos-final" class="text-5xl font-black text-blue-900">0</p>
            </div>
            <button onclick="window.location.reload()" class="bg-blue-600 text-white w-full py-4 rounded-2xl font-bold">Reiniciar</button>
        </div>
    </div>

    <script>
        // CONFIGURA√á√ÉO DO SEU FIREBASE (COLE SEUS DADOS AQUI)
         const firebaseConfig = {
  apiKey: "AIzaSyCzwQJ1k25R6eSmroZ7mtTbzbMYvJWyHNU",
  authDomain: "franca-odontologia-3.firebaseapp.com",
  projectId: "franca-odontologia-3",
  storageBucket: "franca-odontologia-3.firebasestorage.app",
  messagingSenderId: "838434930814",
  appId: "1:838434930814:web:e2a5c59e68b29605a0d82f"
};
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();
        const db = firebase.database();

        let qAtual = 0;
        let pontosGanhos = 0;
        let usuarioLogado = null;

        const perguntas = [
            { q: "O clareamento dental remove o esmalte e deixa os dentes finos?", a: false, e: "Mito! O gel apenas remove pigmentos, o esmalte continua forte." },
            { q: "O uso do fio dental √© t√£o importante quanto a escova√ß√£o?", a: true, e: "Verdade! S√≥ o fio limpa onde a escova n√£o chega." },
            { q: "√â normal a gengiva sangrar um pouco na escova√ß√£o?", a: false, e: "Mito! Gengiva saud√°vel n√£o sangra. Procure o dentista!" },
            { q: "Doces n√£o s√£o os √∫nicos culpados pelas c√°ries?", a: true, e: "Verdade! P√£es e massas tamb√©m alimentam as bact√©rias da c√°rie." },
            { q: "Quem usa aparelho tem mais facilidade de ter c√°ries?", a: true, e: "Verdade! O aparelho ret√©m mais res√≠duos, por isso a higiene deve ser dobrada." }
        ];

        // L√≥gica de Autentica√ß√£o
        auth.onAuthStateChanged((user) => {
            if (user) {
                usuarioLogado = user;
                document.getElementById('auth-container').classList.add('hidden');
                document.getElementById('game-wrapper').classList.remove('hidden');
                carregarQuestao();
            } else {
                document.getElementById('auth-container').classList.remove('hidden');
                document.getElementById('game-wrapper').classList.add('hidden');
            }
        });

        function fazerLogin() {
            const provider = new firebase.auth.GoogleAuthProvider();
            auth.signInWithPopup(provider);
        }

        function carregarQuestao() {
            const questao = perguntas[qAtual];
            document.getElementById('num-atual').innerText = qAtual + 1;
            document.getElementById('pergunta').innerText = questao.q;
            document.getElementById('feedback').classList.add('hidden');
            document.getElementById('botoes-acao').classList.remove('hidden');
        }

        function responder(escolha) {
            const questao = perguntas[qAtual];
            const acertou = escolha === questao.a;
            document.getElementById('botoes-acao').classList.add('hidden');
            const feedbackDiv = document.getElementById('feedback');
            feedbackDiv.classList.remove('hidden');

            if (acertou) {
                pontosGanhos += 10;
                document.getElementById('pontos-view').innerText = pontosGanhos;
                feedbackDiv.innerHTML = `<div class="bg-green-50 p-4 rounded-2xl border-2 border-green-200">
                    <p class="text-green-700 font-bold">‚úÖ Acertou!</p><p class="text-green-600 text-sm">${questao.e}</p>
                </div>`;
            } else {
                feedbackDiv.innerHTML = `<div class="bg-red-50 p-4 rounded-2xl border-2 border-red-200">
                    <p class="text-red-700 font-bold">‚ùå Na verdade...</p><p class="text-red-600 text-sm">${questao.e}</p>
                </div>`;
            }

            const btn = document.createElement('button');
            btn.innerText = (qAtual < perguntas.length - 1) ? "Pr√≥xima" : "Ver Resultado";
            btn.className = "w-full bg-blue-600 text-white py-4 rounded-2xl font-bold mt-4";
            btn.onclick = () => {
                qAtual++;
                if (qAtual < perguntas.length) carregarQuestao();
                else finalizarESalvar();
            };
            feedbackDiv.appendChild(btn);
        }

        function finalizarESalvar() {
            const refRanking = db.ref('ranking/' + usuarioLogado.uid);
            refRanking.transaction((dados) => {
                if (!dados) return { nome: usuarioLogado.displayName, pontos: pontosGanhos, foto: usuarioLogado.photoURL };
                return { ...dados, pontos: (dados.pontos || 0) + pontosGanhos };
            }).then(() => {
                document.getElementById('game-container').classList.add('hidden');
                document.getElementById('tela-final').classList.remove('hidden');
                document.getElementById('pontos-final').innerText = pontosGanhos;
                document.getElementById('nome-paciente').innerText = "Parab√©ns, " + usuarioLogado.displayName.split(' ')[0] + "!";
            });
        }
    </script>
</body>
</html>
